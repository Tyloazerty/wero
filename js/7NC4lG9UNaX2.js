(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[369],{2726:function(e){var t;self,t=()=>(()=>{"use strict";var e,t,n,r,o,i,a,u,s,c,l,d,f,m,p,h,g,v={};v.d=(e,t)=>{for(var n in t)v.o(t,n)&&!v.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},v.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var y={};function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}function S(e,t,n){return(t=k(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){S(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}v.d(y,{default:()=>nw});var D=((e={}).REASON_GENERAL="general",e.REASON_GDPR="gdpr",e),E={TRANSACTION_ERROR:"XHR transaction failed due to an error",SERVER_MALFORMED_RESPONSE:"Response from server is malformed",SERVER_INTERNAL_ERROR:"Internal error occurred on the server",SERVER_CANNOT_PROCESS:"Server was not able to process the request, probably due to error coming from the client",NO_CONNECTION:"No internet connectivity",SKIP:"Skipping slower attempt",MISSING_URL:"Url is not provided"},N=((t={}).NO_STORAGE="noStorage",t.INDEXED_DB="indexedDB",t.LOCAL_STORAGE="localStorage",t),O={default:"adjust.com",india:"adjust.net.in",china:"adjust.world",world:"adjust.world",EU:"eu.adjust.com",TR:"tr.adjust.com",US:"us.adjust.com"},I="https://",R={WEB_UUID_CREATED:"activity:web_uuid",ATTRIBUTION_RECEIVED:"activity:attribution"};function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){if(e){if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||x(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return!Object.keys(e).length&&e.constructor===Object}function j(e){return"object"===b(e)&&null!==e&&!(e instanceof Array)}function T(e){try{var t=JSON.parse(e);return j(t)}catch(e){return!1}}function B(e,t,n){for(var r=0;r<e.length;r+=1)if(function(e){return Array.isArray(t)?t.every(function(t){return e[t]===n[t]}):e[t]===n}(e[r]))return r;return -1}function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce(function(e,t){return w(w({},e),{},S({},t.key,t.value))},{})}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter(function(e){return -1!==t.indexOf(e)})}function K(e,t){return new RegExp("\\/".concat(t,"(\\/.*|\\?.*){0,1}$")).test(e)}function q(e,t){var n=C(t,2),r=n[0],o=n[1];return w(w({},e),{},S({},r,o))}function G(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function M(e){return Object.keys(e).map(function(t){return e[t]})}function F(e){return j(e)?!_(e):!!e||0===e}function W(){try{var e=new Date().toString(),t=window.localStorage;t.setItem(e,e);var n=t.getItem(e)===e;return t.removeItem(e),!!(n&&t)}catch(e){return!1}}let V={namespace:"adjust-sdk",version:"5.7.1",env:"production"};var H="error",Y="warning",z="info",J="verbose",Q=S(S(S(S(S({},"none",-1),H,0),Y,1),z,2),J,3),X={log:"  ",info:" ",warn:" ",error:""},Z={development:J,production:H,test:J},$=et(),ee="";function et(){return Z[V.env]||H}function en(e,t){if(!(Q[$]<Q[t])){for(var n,r=new Date().toISOString(),o=X[e],i=["[".concat(V.namespace,"]"),r,"".concat(e.toUpperCase(),":").concat(o)],a=ee?document.querySelector(ee):null,u=arguments.length,s=Array(u>2?u-2:0),c=2;c<u;c++)s[c-2]=arguments[c];(n=console)[e].apply(n,i.concat(s)),a&&(a.textContent+="".concat(i.join(" ")," ").concat(s.map(function(e){return j(e)?JSON.stringify(e):e}).join(" "),"\n"),a.scrollTop=a.scrollHeight)}}function er(e,t){return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];en.apply(void 0,[e,t].concat(r))}}var eo={setLogLevel:function(e,t){if(!(!e||-1!==Object.keys(Q).indexOf(e))){en("error","error","You must set one of the available log levels: verbose, info, warning, error or none");return}$=e||et(),ee=t||ee,en("info",e,"Log level set to ".concat($))},log:er("log",J),info:er("info",z),warn:er("warn",Y),error:er("error",H)},ei=null,ea=null,eu=["appToken","environment"],es=[].concat(eu,["defaultTracker","externalDeviceId"]),ec=["customUrl","dataResidency","urlStrategy","eventDeduplicationListLimit","namespace"];function el(e){var t=eu.filter(function(t){return!e[t]});return!!t.length&&(eo.error("You must define ".concat(function(e){if(!e.length)return"";if(1===e.length)return"".concat(e[0]);var t=e.length-1,n=e.slice(0,t).join(", ");return"".concat(n," and ").concat(e[t])}(t))),!0)}let ed={sessionWindow:18e5,sessionTimerWindow:6e4,requestValidityWindow:24192e5,set:function(e){el(e)||(ei=es.filter(function(t){return!!e[t]}).map(function(t){return[t,e[t]]}).reduce(function(e,t){return q(e,t)},{}),ea=ec.filter(function(t){return!!e[t]}).map(function(t){return[t,e[t]]}).reduce(q,{}))},getBaseParams:function(){return ei?w({},ei):{}},getCustomConfig:function(){return ea?w({},ea):{}},isInitialised:function(){return eu.reduce(function(e,t){return e&&!!ei&&!!ei[t]},!0)},hasMissing:el,destroy:function(){ei=null,ea=null}};var ef=((n=ef||{}).Queue="queue",n.ActivityState="activityState",n.GlobalParams="globalParams",n.EventDeduplication="eventDeduplication",n),em=((r=em||{}).Preferences="preferences",r),ep=((o=ep||{}).Queue="q",o.ActivityState="as",o.GlobalParams="gp",o.EventDeduplication="ed",o),eh=((i=eh||{}).Preferences="p",i),eg={fields:{thirdPartySharingDisabled:{key:"td",keys:{reason:{key:"r",values:S({},D.REASON_GENERAL,1)},pending:{key:"p",values:{false:0,true:1}}}},sdkDisabled:{key:"sd",keys:{reason:{key:"r",values:S(S({},D.REASON_GENERAL,1),D.REASON_GDPR,2)},pending:{key:"p",values:{false:0,true:1}}}}}},ev={queue:{name:ep.Queue,scheme:{keyPath:"timestamp",autoIncrement:!1,fields:{url:{key:"u",values:{"/session":1,"/event":2,"/gdpr_forget_device":3,"/sdk_click":4,"/disable_third_party_sharing":5}},method:{key:"m",values:{GET:1,POST:2,PUT:3,DELETE:4}},timestamp:"t",createdAt:"ca",params:{key:"p",keys:{timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastInterval:"li",eventToken:"et",revenue:"re",currency:"cu",callbackParams:"cp",partnerParams:"pp"}}}}},activityState:{name:ep.ActivityState,scheme:{keyPath:"uuid",autoIncrement:!1,fields:{uuid:{key:"u",values:{unknown:"-"}},timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastActive:"la",lastInterval:"li",installed:{key:"in",values:{false:0,true:1}},attribution:{key:"at",keys:{adid:"a",tracker_token:"tt",tracker_name:"tn",network:"nt",campaign:"cm",adgroup:"ag",creative:"cr",click_label:"cl",state:{key:"st",values:{installed:1,reattributed:2}}}}}}},globalParams:{name:ep.GlobalParams,scheme:{keyPath:"keyType",autoIncrement:!1,index:"type",fields:{keyType:{key:"kt",composite:["key","type"]},key:"k",value:"v",type:{key:"t",values:{callback:1,partner:2}}}}},eventDeduplication:{name:ep.EventDeduplication,scheme:{keyPath:"internalId",autoIncrement:!0,fields:{internalId:"ii",id:"i"}}},preferences:{name:eh.Preferences,scheme:eg,permanent:!0}};function ey(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"values")}function eb(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"keys")}function ek(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"composite")}function eS(e){return!!e&&"string"!=typeof e}function eP(e,t){if(t){var n=ev[e].scheme.fields[t];return eS(n)?n.key:n||t}}var ew=G(ev).map(function(e){var t=C(e,2),n=t[0],r=t[1];return[n,{keyPath:r.scheme.keyPath,autoIncrement:r.scheme.autoIncrement,index:r.scheme.index,fields:r.scheme.fields}]}).reduce(q,{}),eD=G(ew).map(function(e){var t=C(e,2),n=t[0],r=t[1],o={keyPath:eP(n,r.keyPath),autoIncrement:r.autoIncrement,index:eP(n,r.index),fields:function e(t,n){return G(n).map(function(n){var r,o,i,a=C(n,2),u=a[0],s=a[1];return eS(s)?[s.key,(r=ey(s)?{values:G(s.values).map(function(e){var t=C(e,2),n=t[0];return[t[1],function(e){try{return JSON.parse(e)}catch(t){return e}}(n)]}).reduce(q,{})}:{},o=eb(s)?{keys:e(t,s.keys)}:{},i=ek(s)?{composite:s.composite.map(function(e){return eP(t,e)})}:{},w(w(w({key:u},r),o),i))]:[s,u]}).reduce(q,{})}(n,r.fields)};return[n,o]}).reduce(q,{}),eE=G(ev).reduce(function(e,t){var n=C(t,2)[1];return e.concat(n.scheme.fields)},[]).map(function(e){return M(e).filter(ey).map(function(e){return G(e.values)}).reduce(function(e,t){return e.concat(t)},[])}).reduce(function(e,t){return e.concat(t)},[]).reduce(q,{}),eN=G(ev).map(function(e){var t=C(e,2),n=t[0],r=t[1];return[n,{name:r.name,permanent:r.permanent}]}).reduce(q,{});let eO={left:ew,right:eD,values:eE,storeNames:{left:eN,right:G(eN).map(function(e){var t=C(e,2),n=t[0],r=t[1],o={name:n,permanent:r.permanent};return[r.name,o]}).reduce(q,{})}};var eI=((a=eI||{}).LowerBound="lowerBound",a.UpperBound="upperBound",a),eR=((u=eR||{}).right="right",u.left="left",u);function eA(e,t){return e&&void 0!==e[t]?e[t]:t}function ex(e,t,n,r){if(n){var o=r||eO[t][eT(e,eR.right)].fields;return G(n).map(function(n){var r=C(n,2),i=r[0];return function(e,t,n,r,o){if(!o)return[n,r];var i=eS(o)?o.key:o;return j(r)?[i,ex(e,t,r,eb(o)?o.keys:null)]:[i,eA(ey(o)?o.values:null,r)]}(e,t,i,r[1],o[i])}).reduce(function(e,t){var n=C(t,2),r=n[0],o=n[1];return w(w({},e),{},S({},r,o))},{})}}function eC(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.map(function(n){return ex(e,t,n)})}function e_(e,t,n){var r=eO[t][eT(e,eR.right)],o=r.fields[r.keyPath],i=n instanceof Array?n.slice():[n],a=(ek(o)?o.composite:[r.keyPath]).map(function(e,t){var n=r.fields[e];return eA(ey(n)?n.values:null,i[t])});return 1===a.length?a[0]:a}function ej(e){return eO.values[e]||e}function eT(e,t){return(eO.storeNames[t][e]||{}).name||e}function eB(e,t){return{name:t.name,message:t.message.replace('"'.concat(e,'"'),eT(e,eR.right))}}function eU(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function eL(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function eK(e,t,n){return t&&eL(e.prototype,t),n&&eL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function eq(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e+"",r=1;r<=t;r+=1)e<Math.pow(10,r)&&(n="0".concat(n));return n}function eG(e){var t,n,r,o,i,a,u,s,c,l=e?new Date(e):new Date,d=(t=eq(l.getDate()),n=eq(l.getMonth()+1),[l.getFullYear(),n,t].join("-")),f=(r=eq(l.getHours(),1),o=eq(l.getMinutes()),i=eq(l.getSeconds()),a=eq(l.getMilliseconds(),2),[r,o,i].join(":")+"."+a),m=(s=eq(Math.floor(Math.abs(u=l.getTimezoneOffset())/60)),c=eq(Math.abs(u)%60),(u>0?"-":"+")+s+c);return"".concat(d,"T").concat(f,"Z").concat(m)}function eM(e,t){return isNaN(e)||isNaN(t)?0:Math.abs(t-e)}var eF={},eW=[];function eV(e,t){var n="id"+Math.random().toString(36).substring(2,16);return eF[e]||(eF[e]=[]),eF[e].push({id:n,cb:t}),n}function eH(e,t){eF[e]&&eF[e].forEach(function(n){"function"==typeof n.cb&&eW.push(setTimeout(function(){return n.cb(e,t)}))})}var eY={},ez=!1,eJ=!1;function eQ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};eY=ez?w({},e):{}}function eX(){if(ez){var e;eY.lastInterval=(e=eY.lastActive)?Math.round(eM(e,Date.now())/1e3):-1,eY.lastActive=Date.now()}}function eZ(e){eY=w(w({},eY),e)}function e$(){eJ=!0}function e0(){return Math.round(eM(eY.lastActive,Date.now())/1e3)}function e1(){return(eY.timeSpent||0)+(eJ?e0():0)}function e2(){var e=eM(eY.lastActive,Date.now())<ed.sessionWindow,t=eJ||!eJ&&e;return(eY.sessionLength||0)+(t?e0():0)}function e6(){ez&&(eZ({timeSpent:e1(),sessionLength:e2()}),eX())}let e4={get current(){return ez?w({},eY):{}},set current(value){eQ(value)},init:function(e){ez=!0,eQ(e)},isStarted:function(){return ez},toForeground:e$,toBackground:function(){eJ=!1},initParams:function(){e6(),e$()},getParams:function(e){if(!ez)return null;var t=eY.lastInterval>=0?eY.lastInterval:0,n={timeSpent:eY.timeSpent||0,sessionLength:eY.sessionLength||0,sessionCount:eY.sessionCount||1,lastInterval:t||0};return e&&K(e,"event")&&(n.eventCount=eY.eventCount),n},updateParams:function(e,t){if(ez){var n={};n.timeSpent=e1(),n.sessionLength=e2(),K(e,"session")&&(n.sessionCount=(eY.sessionCount||0)+1),K(e,"event")&&(n.eventCount=(eY.eventCount||0)+1),eZ(n),t||eX()}},updateInstalled:function(){ez&&!eY.installed&&eZ({installed:!0})},updateSessionOffset:e6,updateSessionLength:function(){ez&&(eZ({sessionLength:e2()}),eX())},resetSessionOffset:function(){ez&&eZ({timeSpent:0,sessionLength:0})},updateLastActive:eX,destroy:function(){eY={},ez=!1,eJ=!1},getAttribution:function(){return ez?eY.attribution?eY.attribution:(eo.log("No attribution data yet"),null):null},getWebUUID:function(){return ez?eY.uuid:null},waitForAttribution:function(){return eY.attribution?Promise.resolve(eY.attribution):new Promise(function(e){return eV(R.ATTRIBUTION_RECEIVED,function(t,n){return e(n)})})},waitForWebUUID:function(){return eY.uuid?Promise.resolve(eY.uuid):new Promise(function(e){return eV(R.WEB_UUID_CREATED,function(t,n){return e(n)})})}};var e3=eK(function e(){eU(this,e),S(this,"items",{})},[{key:"getItem",value:function(e){return Object.prototype.hasOwnProperty.call(this.items,e)?this.items[e]:null}},{key:"removeItem",value:function(e){delete this.items[e]}},{key:"setItem",value:function(e,t){this.items[e]=t}}]);let e5=new(eK(function e(){var t=this;eU(this,e),S(this,"defaultName",V.namespace),S(this,"storageName",this.defaultName),S(this,"storeNames",eO.storeNames.left),this.storesMap={},W()?this.storage=window.localStorage:this.storage=new e3;var n=this.read.bind(this),r=this.write.bind(this);M(this.storeNames).forEach(function(e){var o=e.name;Object.defineProperty(t.storesMap,o,{get:function(){return n(o)},set:function(e){r(o,e)}})}),Object.freeze(this.storesMap)},[{key:"read",value:function(e){var t=this.storage.getItem("".concat(this.storageName,".").concat(e)),n=t?JSON.parse(t):null;return e===eh.Preferences&&n?ex(eh.Preferences,eR.right,n):n}},{key:"write",value:function(e,t){t?this.storage.setItem("".concat(this.storageName,".").concat(e),JSON.stringify(t instanceof Array?t:ex(eh.Preferences,eR.left,t))):this.storage.removeItem("".concat(this.storageName,".").concat(e))}},{key:"clear",value:function(){this.deleteData()}},{key:"deleteData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];M(this.storeNames).forEach(function(n){(t||!n.permanent)&&e.storage.removeItem("".concat(e.storageName,".").concat(n.name))})}},{key:"setCustomName",value:function(e){var t=this;if(e&&e.length){var n="".concat(V.namespace,"-").concat(e);M(this.storeNames).forEach(function(e){var r=e.name,o=t.storage.getItem("".concat(t.storageName,".").concat(r));o&&t.storage.setItem("".concat(n,".").concat(r),o)}),this.deleteData(!0),this.storageName=n}}},{key:"stores",get:function(){return this.storesMap}}]));var e7=ev.preferences.name,e8=null;function e9(){return e8||te(),e8?w({},e8):null}function te(){e8=e5.stores[e7]}function tt(){var e=e9();return e&&e.sdkDisabled||null}function tn(e){var t=e?w({},e):null;e5.stores[e7]=w(w({},e9()),{},{sdkDisabled:t}),te()}function tr(){var e=e5.stores[e7]||{},t=(e8||{}).sdkDisabled||null;e.sdkDisabled&&!t&&eH("sdk:shutdown"),te()}function to(){e5.stores[e7]||(e5.stores[e7]=w({},e8))}e8=e9();var ti=((s=ti||{}).add="add",s.put="put",s.get="get",s.list="list",s.clear="clear",s.delete="delete",s),ta=((c=ta||{}).readonly="readonly",c.readwrite="readwrite",c),tu=function(){function e(){eU(this,e),S(this,"dbDefaultName",V.namespace),S(this,"dbName",this.dbDefaultName),S(this,"dbVersion",1),S(this,"indexedDbConnection",null),S(this,"notSupportedError",{name:"IDBNotSupported",message:"IndexedDB is not supported"}),S(this,"databaseOpenError",{name:"CannotOpenDatabaseError",message:"Cannot open a database"}),S(this,"noConnectionError",{name:"NoDatabaseConnection",message:"Cannot open a transaction"});var t=e.getIndexedDB();if(!t)throw this.notSupportedError;this.idbFactory=t}return eK(e,[{key:"setCustomName",value:function(e){return e&&e.length>0?(this.dbName="".concat(V.namespace,"-").concat(e),this.migrateDb(this.dbDefaultName,this.dbName)):Promise.resolve()}},{key:"openDatabase",value:function(t,n,r){var o=this;return e.isSupported().then(function(e){return e?new Promise(function(e,i){var a=o.idbFactory.open(t,r);n&&(a.onupgradeneeded=function(e){return n(e,i)}),a.onsuccess=function(t){var n=t.target.result;n?e(n):i(o.databaseOpenError)},a.onerror=i}):Promise.reject(o.notSupportedError)})}},{key:"databaseExists",value:function(e){var t=this;return new Promise(function(n){var r=!0;t.openDatabase(e,function(){r=!1}).then(function(n){if(n.close(),!r)return t.deleteDatabaseByName(e)}).then(function(){return n(r)})})}},{key:"cloneData",value:function(e,t){var n=this,r=function(r){var o=n.indexedDbConnection;return n.indexedDbConnection=e,n.getAll(r).then(function(e){if(n.indexedDbConnection=t,!(e.length<1))return n.addBulk(r,e,!0)}).then(function(){n.indexedDbConnection=o})};return M(eO.storeNames.left).map(function(e){return e.name}).filter(function(e){return"p"!==e}).map(function(e){return function(){return r(e)}}).reduce(function(e,t){return e.then(t)},Promise.resolve())}},{key:"migrateDb",value:function(e,t){var n=this;return this.databaseExists(e).then(function(r){return r?Promise.all([n.openDatabase(e,n.handleUpgradeNeeded,n.dbVersion),n.openDatabase(t,n.handleUpgradeNeeded,n.dbVersion)]).then(function(t){var r=C(t,2),o=r[0],i=r[1];return n.cloneData(o,i).then(function(){return n.indexedDbConnection=i,o.close(),n.deleteDatabaseByName(e)})}).then(function(){return eo.info("Database migration finished")}):n.openDatabase(t,n.handleUpgradeNeeded,n.dbVersion).then(function(e){n.indexedDbConnection=e})})}},{key:"handleUpgradeNeeded",value:function(e,t){var n=e.target.result;e.target.transaction.onerror=t,e.target.transaction.onabort=t;var r=eO.storeNames.left,o=e4.current||{},i=o&&!_(o);G(r).filter(function(e){return!C(e,2)[1].permanent}).forEach(function(e){var t=C(e,2),r=t[0],a=t[1].name,u=eO.right[r],s=n.createObjectStore(a,{keyPath:u.keyPath,autoIncrement:u.autoIncrement||!1});if(u.index&&s.createIndex("".concat(u.index,"Index"),u.index),a===ep.ActivityState&&i){s.add(ex(r,eR.left,o)),eo.info("Activity state has been recovered");return}var c=e5.stores[a];c&&(c.forEach(function(e){return s.add(e)}),eo.info("Migration from localStorage done for ".concat(r," store")))}),to(),e5.clear()}},{key:"open",value:function(){var e=this;return this.indexedDbConnection?Promise.resolve({success:!0}):this.openDatabase(this.dbName,this.handleUpgradeNeeded,this.dbVersion).then(function(t){return e.indexedDbConnection=t,e.indexedDbConnection.onclose=function(){return e.destroy},{success:!0}})}},{key:"getTransactionStore",value:function(e,t,n){var r,o=e.storeName,i=e.mode,a=n.transaction([o],i),u=a.objectStore(o),s=eO.right[eT(o,eR.right)];return s.index&&(r=u.index("".concat(s.index,"Index"))),a.onerror=t,a.onabort=t,{transaction:a,store:u,index:r,options:s}}},{key:"overrideError",value:function(e,t){var n=t.target.error;return e({name:n.name,message:n.message})}},{key:"getCompositeKeys",value:function(e){var t=e.fields[e.keyPath];return ek(t)?t.composite:null}},{key:"targetIsObject",value:function(e){return j(e)}},{key:"prepareTarget",value:function(e,t,n){if(n===ti.clear||!t)return null;var r=this.getCompositeKeys(e);return -1!==[ti.add,ti.put].indexOf(n)?this.targetIsObject(t)?r?w(S({},e.keyPath,r.map(function(e){return t[e]}).join("")),t):t:null:t instanceof Array?t.join(""):t}},{key:"prepareResult",value:function(e,t){var n=this.getCompositeKeys(e);return n&&this.targetIsObject(t)?n.map(function(e){return t[e]}):null}},{key:"initRequest",value:function(e){var t=this,n=e.storeName,r=e.target,o=void 0===r?null:r,i=e.action,a=e.mode,u=void 0===a?ta.readonly:a;return this.open().then(function(){return new Promise(function(e,r){if(t.indexedDbConnection){var a=t.getTransactionStore({storeName:n,mode:u},r,t.indexedDbConnection),s=a.store,c=a.options,l=s[i](t.prepareTarget(c,o,i)),d=t.prepareResult(c,o);l.onsuccess=function(){i!==ti.get||l.result?e(d||l.result||o):r({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(n,'" store')})},l.onerror=function(e){return t.overrideError(r,e)}}else r(t.noConnectionError)})})}},{key:"initBulkRequest",value:function(e){var t=this,n=e.storeName,r=e.target,o=e.action,i=e.mode,a=void 0===i?ta.readwrite:i;return r&&(!r||r.length)?this.open().then(function(){return new Promise(function(e,i){if(t.indexedDbConnection){var u=t.getTransactionStore({storeName:n,mode:a},i,t.indexedDbConnection),s=u.transaction,c=u.store,l=u.options,d=[],f=r[0];s.oncomplete=function(){return e(d)},function e(n){n.onerror=function(e){return t.overrideError(i,e)},n.onsuccess=function(){d.push(t.prepareResult(l,f)||n.result),f=r[d.length],d.length<r.length&&e(c[o](t.prepareTarget(l,f,o)))}}(c[o](t.prepareTarget(l,f,o)))}else i(t.noConnectionError)})}):Promise.reject({name:"NoTargetDefined",message:"No array provided to perform ".concat(o,' bulk operation into "').concat(n,'" store')})}},{key:"openCursor",value:function(e){var t=this,n=e.storeName,r=e.action,o=e.range,i=void 0===o?null:o,a=e.firstOnly,u=void 0!==a&&a,s=e.mode,c=void 0===s?ta.readonly:s;return this.open().then(function(){return new Promise(function(e,o){if(t.indexedDbConnection){var a=t.getTransactionStore({storeName:n,mode:c},o,t.indexedDbConnection),s=a.transaction,l=a.store,d=a.index,f=a.options,m=(d||l).openCursor(i),p=[];s.oncomplete=function(){return e(p)},m.onsuccess=function(e){var n=e.target.result;n&&(r===ti.delete?(n.delete(),p.push(t.prepareResult(f,n.value)||n.value[f.keyPath])):p.push(n.value),u||n.continue())},m.onerror=function(e){return t.overrideError(o,e)}}else o(t.noConnectionError)})})}},{key:"deleteDatabaseByName",value:function(e){var t=this;return new Promise(function(n,r){var o=t.idbFactory.deleteDatabase(e);o.onerror=function(e){return t.overrideError(r,e)},o.onsuccess=function(){return n()},o.onblocked=function(e){return r(e.target)}})}},{key:"getAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.openCursor({storeName:e,action:ti.list,firstOnly:t})}},{key:"getFirst",value:function(e){return this.getAll(e,!0).then(function(e){return e.length?e[0]:void 0})}},{key:"getItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:ti.get})}},{key:"filterBy",value:function(e,t){var n=IDBKeyRange.only(t);return this.openCursor({storeName:e,action:ti.list,range:n})}},{key:"addItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:ti.add,mode:ta.readwrite})}},{key:"addBulk",value:function(e,t,n){return this.initBulkRequest({storeName:e,target:t,action:n?ti.put:ti.add,mode:ta.readwrite})}},{key:"updateItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:ti.put,mode:ta.readwrite})}},{key:"deleteItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:ti.delete,mode:ta.readwrite})}},{key:"deleteBulk",value:function(e,t,n){var r=n?IDBKeyRange[n](t):IDBKeyRange.only(t);return this.openCursor({storeName:e,action:ti.delete,range:r,mode:ta.readwrite})}},{key:"trimItems",value:function(e,t){var n=this,r=eO.right[eT(e,eR.right)];return this.getAll(e).then(function(e){return e.length?e[t-1]:null}).then(function(t){return t?n.deleteBulk(e,t[r.keyPath],eI.UpperBound):[]})}},{key:"count",value:function(e){var t=this;return this.open().then(function(){return new Promise(function(n,r){if(t.indexedDbConnection){var o=t.getTransactionStore({storeName:e,mode:ta.readonly},r,t.indexedDbConnection).store.count();o.onsuccess=function(){return n(o.result)},o.onerror=function(e){return t.overrideError(r,e)}}else r(t.noConnectionError)})})}},{key:"clear",value:function(e){return this.initRequest({storeName:e,action:ti.clear,mode:ta.readwrite})}},{key:"destroy",value:function(){this.indexedDbConnection&&this.indexedDbConnection.close(),this.indexedDbConnection=null}},{key:"deleteDatabase",value:function(){return this.destroy(),this.deleteDatabaseByName(this.dbName)}}],[{key:"tryOpen",value:function(t){return new Promise(function(n){try{var r=t.open(e.dbValidationName);r.onsuccess=function(){r.result.close(),t.deleteDatabase(e.dbValidationName),n(!0)},r.onerror=function(){return n(!1)}}catch(e){n(!1)}})}},{key:"isSupported",value:function(){if(e.isSupportedPromise);else{var t="IndexedDB is not supported in this browser";e.isSupportedPromise=new Promise(function(n){var r=e.getIndexedDB(),o=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);!r||o?(eo.warn(t),n(!1)):n(e.tryOpen(r).then(function(e){return e||eo.warn(t),e}))})}return e.isSupportedPromise}},{key:"getIndexedDB",value:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB}}])}();function ts(e){return function(e){if(Array.isArray(e))return A(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}S(tu,"dbValidationName","validate-db-openable"),S(tu,"isSupportedPromise",null);var tc=function(){function e(){eU(this,e)}return eK(e,[{key:"open",value:function(){return e.isSupported().then(function(e){if(!e)return{status:"error",error:{name:"LSNotSupported",message:"LocalStorage is not supported"}};var t=eO.storeNames.left,n=e4.current||{},r=n&&!_(n);return G(t).filter(function(e){return!C(e,2)[1].permanent}).forEach(function(e){var t=C(e,2),o=t[0],i=t[1].name;i!==ep.ActivityState||e5.stores[i]?e5.stores[i]||(e5.stores[i]=[]):e5.stores[i]=r?[ex(o,eR.left,n)]:[]}),to(),{status:"success"}})}},{key:"getCompositeKeys",value:function(e){var t=e.fields[e.keyPath];return ek(t)?t.composite:null}},{key:"getKeys",value:function(e){var t=eT(e,eR.right),n=eO.right[t];return this.getCompositeKeys(n)||[n.keyPath]}},{key:"nextIndex",value:function(e){return"number"==typeof e?e+1:void 0}},{key:"initRequest",value:function(e,t){var n=this,r=e.storeName,o=e.id,i=e.item,a=eO.right[eT(r,eR.right)];return this.open().then(function(e){return"error"===e.status?Promise.reject(e.error):new Promise(function(e,u){var s,c=e5.stores[r],l=n.getKeys(r),d=(c[c.length-1]||{})[a.keyPath]||0;if(o){var f=Array.isArray(o)?o.slice():[o];s=l.map(function(e,t){return[e,f[t]]}).reduce(q,{})}else s=w({},i);var m=s?B(c,l,s):0;return t(e,u,{keys:l,items:c,index:m,options:a,lastId:d})})})}},{key:"sort",value:function(e,t,n){var r=ts(e),o=t.slice().reverse();return r.sort(function(e,t){return o.reduce(function(r,o){var i,a;return r||(i=n?n===e[o]:e[o]<t[o],a=n?n>e[o]:e[o]>t[o],i?-1:a?1:0)},0)})}},{key:"prepareTarget",value:function(e,t,n){var r=this.getCompositeKeys(e);return r?w(S({},e.keyPath,r.map(function(e){return t[e]}).join("")),t):e.autoIncrement&&n?w(S({},e.keyPath,n),t):w({},t)}},{key:"prepareResult",value:function(e,t){var n=this.getCompositeKeys(e);return n?n.map(function(e){return t[e]}).filter(function(e){return!j(e)}):t[e.keyPath]}},{key:"getAll",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.open().then(function(r){return"error"===r.status?Promise.reject(r.error):new Promise(function(r,o){var i=e5.stores[e];i instanceof Array?r(n?[i[0]]:t.sort(i,t.getKeys(e))):o({name:"NotFoundError",message:"No objectStore named ".concat(e," in this database")})})})}},{key:"getFirst",value:function(e){return this.getAll(e,!0).then(function(e){return e.length?e[0]:void 0})}},{key:"getItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,id:t},function(t,r,o){var i=o.items,a=o.index,u=o.options;-1===a?r({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(e,'" store')}):t(n.prepareTarget(u,i[a]))})}},{key:"filterBy",value:function(e,t){return this.getAll(e).then(function(n){return n.filter(function(n){var r=eO.right[eT(e,eR.right)];return(r.index&&n[r.index])===t})})}},{key:"addItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,item:t},function(r,o,i){var a=i.items,u=i.index,s=i.options,c=i.lastId;-1!==u?o({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing item into "'.concat(e,'" store')}):(a.push(n.prepareTarget(s,t,n.nextIndex(c))),e5.stores[e]=a,r(n.prepareResult(s,t)))})}},{key:"addBulk",value:function(e,t,n){var r=this;return this.initRequest({storeName:e},function(o,i,a){var u=a.keys,s=a.items,c=a.options,l=a.lastId;if(!t||t&&!t.length){i({name:"NoTargetDefined",message:'No array provided to perform add bulk operation into "'.concat(e,'" store')});return}var d=l,f=t.map(function(e){return r.prepareTarget(c,e,d=r.nextIndex(d))}),m=f.filter(function(e){return -1!==B(s,u,e)}).map(function(e){return e[c.keyPath]}),p=n?s.filter(function(e){return -1===m.indexOf(e[c.keyPath])}):ts(s);m.length&&!n?i({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing items into "'.concat(e,'" store')}):(e5.stores[e]=r.sort([].concat(ts(p),ts(f)),u),o(t.map(function(e){return r.prepareResult(c,e)})))})}},{key:"updateItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,item:t},function(r,o,i){var a=i.items,u=i.index,s=i.options,c=i.lastId,l=-1===u?n.nextIndex(c):void 0,d=n.prepareTarget(s,t,l);-1===u?a.push(d):a.splice(u,1,d),e5.stores[e]=a,r(n.prepareResult(s,t))})}},{key:"deleteItem",value:function(e,t){return this.initRequest({storeName:e,id:t},function(n,r,o){var i=o.items,a=o.index;-1!==a&&(i.splice(a,1),e5.stores[e]=i),n(t)})}},{key:"findMax",value:function(e,t,n){if(!e.length)return -1;for(var r={index:-1,value:"string"==typeof n?"":0},o=0;o<e.length;o+=1)if(e[o][t]<=n)e[o][t]>=r.value&&(r={value:e[o][t],index:o});else break;return r.index}},{key:"deleteBulk",value:function(e,t,n){var r=this;return this.getAll(e).then(function(o){var i=r.getKeys(e),a=eO.right[eT(e,eR.right)].index||i[0],u=r.sort(o,i,n?null:t),s=r.findMax(u,a,t);if(-1===s)return[];var c=n===eI.LowerBound?s:0,l=n&&n!==eI.UpperBound?u.length:s+1,d=u.splice(c,l).map(function(e){return 1===i.length?e[a]:i.map(function(t){return e[t]})});return e5.stores[e]=u,d})}},{key:"trimItems",value:function(e,t){var n=this,r=eT(e,eR.right),o=eO.right[r];return this.getAll(e).then(function(e){return e.length?e[t-1]:null}).then(function(t){return t?n.deleteBulk(e,t[o.keyPath],eI.UpperBound):[]})}},{key:"count",value:function(e){return this.open().then(function(t){if("error"===t.status)return Promise.reject(t.error);var n=e5.stores[e];return Promise.resolve(n instanceof Array?n.length:1)})}},{key:"clear",value:function(e){return this.open().then(function(t){return"error"===t.status?Promise.reject(t.error):new Promise(function(t){e5.stores[e]=[],t()})})}},{key:"destroy",value:function(){}},{key:"deleteDatabase",value:function(){}}],[{key:"isSupported",value:function(){return e.isSupportedPromise||(e.isSupportedPromise=new Promise(function(e){var t=W();t||eo.warn("LocalStorage is not supported in this browser"),e(t)})),e.isSupportedPromise}}])}();S(tc,"isSupportedPromise",null);var tl=((l=tl||{})[l.noStorage=N.NO_STORAGE]="noStorage",l[l.indexedDB=N.INDEXED_DB]="indexedDB",l[l.localStorage=N.LOCAL_STORAGE]="localStorage",l),td=null;function tf(e){var t=null;return null!==td||(td=Promise.all([tu.isSupported(),tc.isSupported()]).then(function(n){var r=C(n,2),o=r[0],i=r[1];if(e5.setCustomName(e),o){m=tl.indexedDB;var a=new tu;return a.setCustomName(e).then(function(){return t=a})}return i?(m=tl.localStorage,Promise.resolve(t=new tc)):(eo.error("There is no storage available, app will run with minimum set of features"),m=tl.noStorage,Promise.resolve(t=null))}).then(function(){return{type:m,storage:t}})),td}let tm=w({init:tf,getType:function(){return m}},G({getAll:function(e,t,n){return e.getAll(t,n).then(function(e){return eC(t,eR.right,e)})},getFirst:function(e,t){return e.getFirst(t).then(function(e){return ex(t,eR.right,e)})},getItem:function(e,t,n){return e.getItem(t,e_(t,eR.left,n)).then(function(e){return ex(t,eR.right,e)}).catch(function(e){return Promise.reject(eB(t,e))})},filterBy:function(e,t,n){return e.filterBy(t,ej(n)).then(function(e){return eC(t,eR.right,e)})},addItem:function(e,t,n){var r=ex(t,eR.left,n);return e.addItem(t,r).then(function(e){return e_(t,eR.right,e)}).catch(function(e){return Promise.reject(eB(t,e))})},addBulk:function(e,t,n,r){var o=eC(t,eR.left,n);return e.addBulk(t,o,r).then(function(e){return e.map(function(e){return e_(t,eR.right,e)})}).catch(function(e){return Promise.reject(eB(t,e))})},updateItem:function(e,t,n){var r=ex(t,eR.left,n);return e.updateItem(t,r).then(function(e){return e_(t,eR.right,e)})},deleteItem:function(e,t,n){return e.deleteItem(t,e_(t,eR.left,n)).then(function(e){return e_(t,eR.right,e)})},deleteBulk:function(e,t,n,r){return e.deleteBulk(t,ej(n),r).then(function(e){return e.map(function(e){return e_(t,eR.right,e)})})},trimItems:function(e,t,n){return e.trimItems(t,n)},count:function(e,t){return e.count(t)},clear:function(e,t){return e.clear(t)},destroy:function(e){return e.destroy()},deleteDatabase:function(e){return e.deleteDatabase()}}).map(function(e){var t=C(e,2),n=t[0],r=t[1];return[n,function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return tf().then(function(t){var o=t.storage;if(o)return r.call.apply(r,[null,o,eT(e,eR.left)].concat(n))})}]}).reduce(q,{}));function tp(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{status:"error",action:n?"CONTINUE":"RETRY",response:T(e.responseText)?JSON.parse(e.responseText):e.responseText,message:E[t],code:t}}function th(e,t){var n=e.slice(0,e.length-t.length-1).split("").reduce(function(e){return e.concat(" ")},"");return"".concat(t).concat(n,":")}var tg={long:{delay:12e4,maxDelay:864e5,minRange:.5,maxRange:1},short:{delay:200,maxDelay:36e5,minRange:.5,maxRange:1},test:{delay:100,maxDelay:300}},tv=navigator.onLine;function ty(){tv=!0}function tb(){tv=!1}function tk(e,t,n){e.addEventListener&&e.addEventListener(t,n,!1)}function tS(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}function tP(e){return{domains:[e.default,e.world],useSubdomains:!0,isDataResidency:!1}}var tw=((d=tw||{}).Default="default",d.India="india",d.China="china",d),tD=((f=tD||{}).EU="EU",f.TR="TR",f.US="US",f);function tE(e,t){eo.warn("Both ".concat(e," and ").concat(t," are set in config, ").concat(t," will be ignored"))}let tN=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.url,o=n.method,i=void 0===o?"GET":o,a=n.params,u=void 0===a?{}:a,s=n.continueCb,c=n.strategy,l=n.wait,d=r,f=i,m=w({},u),p=s,h=function(){e.reset(),t=e.next()},g=null,v={request:0,connection:0},y=S(l),k=null;function S(e){return(e=e||150)>2147483647?2147483647:e}function P(n){var r=n.wait,o=n.retrying;return(e||(t=(e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=function(e){var t,n,r=function(e){var t=ed.getCustomConfig(),n=t.customUrl,r=t.urlStrategy,o=t.dataResidency;if(n)return eo.warn("customUrl is deprecated, use urlStrategy instead"),(o||r)&&tE("customUrl",o?"dataResidency":"urlStrategy"),{domains:[n],useSubdomains:!1,isDataResidency:!1};if(o&&r&&tE("dataResidency","urlStrategy"),o)return eo.warn("dataResidency is deprecated, use urlStrategy instead"),{domains:[e[o]],useSubdomains:!0,isDataResidency:!0};if("string"==typeof r){if(eo.warn("urlStrategy string literals ('china' and 'india') are deprected, use UrlStartegyConfig instead"),r===tw.India)return{domains:[e.india,e.default],useSubdomains:!0,isDataResidency:!1};if(r===tw.China)return{domains:[e.china,e.default],useSubdomains:!0,isDataResidency:!1}}return r?null:tP(e)}(e)||((t=ed.getCustomConfig().urlStrategy)&&"object"===b(t)?t.domains&&Array.isArray(t.domains)&&!(t.domains.length<1)?{domains:t.domains,useSubdomains:!!t.useSubdomains,isDataResidency:!!t.isDataResidency}:(eo.warn("Invalid urlStartegy: `domains` should be a non-empty array"),tP(e)):tP(e)),o=[],i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=x(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}(r.domains);try{for(i.s();!(n=i.n()).done;){var a=n.value,u=r.useSubdomains?{app:"".concat("https://app.").concat(a),gdpr:"".concat("https://gdpr.").concat(a)}:{app:"".concat(I).concat(a),gdpr:"".concat(I).concat(a)};o.push(u)}}catch(e){i.e(e)}finally{i.f()}return o}(e),n=0;return{next:function(){return n<t.length?{value:t[n++],done:!1}:{value:void 0,done:!0}},reset:function(){n=0}}}()).next()),y=r?S(r):y,function(e){if(!k)return!1;if(g){var t=y-(Date.now()-k);if(e&&t<e)return!0;B()}return!1}(r))?Promise.resolve({status:"error",action:"CONTINUE",response:"",message:E.SKIP,code:"SKIP"}):d?(eo.log("".concat(o?"Re-trying":"Trying"," request ").concat(d," in ").concat(y,"ms")),k=Date.now(),function n(r){return(A(),tv)?new Promise(function(n,o){g=setTimeout(function(){k=null;var i,a=G(r.params).filter(function(e){return F(C(e,2)[1])}).reduce(q,{});return(i={endpoint:r.endpoint,url:r.url,method:r.method,params:w(w({},a),{},{attempts:(v.request?v.request+1:1)+v.connection})},tm.getAll("queue").then(function(e){return{queueSize:e.length}}).then(function(e){var t,n,r,o,i,a,u,s,c;return w(w(w(w(w(w(w(w({},{createdAt:eG()}),{sentAt:eG()}),{webUuid:e4.current.uuid}),(n=void 0!==(t=navigator).doNotTrack,r=void 0!==window.doNotTrack,o=void 0!==t.msDoNotTrack,0===parseInt(i=n?t.doNotTrack:r?window.doNotTrack:o?t.msDoNotTrack:null,10)||"no"===i?{trackingEnabled:!0}:1===parseInt(i,10)||"yes"===i?{trackingEnabled:!1}:null)),{platform:"web"}),{language:(u=C(((a=navigator).language||a.userLanguage||"en").split("-"),2))[0],country:(s=u[1])?""+s.toLowerCase():void 0}),(c=navigator.userAgent||navigator.vendor,{machineType:"Win32"===navigator.platform&&(-1!==c.indexOf("WOW64")||-1!==c.indexOf("Win64"))?"Win64":navigator.platform})),e)}).then(function(e){var t,n,r,o,a,u,s,c,l,d,f,m,p,h,g,v;return t=i.endpoint,g=(s=(u={endpoint:t,url:n=i.url,method:o=void 0===(r=i.method)?"GET":r,params:void 0===(a=i.params)?{}:a}).endpoint,c=u.url,l=u.method,d=u.params,f="REQUEST PARAMETERS:",m=G(w(w(w({},ed.getBaseParams()),e),d)).map(function(e){var t=C(e,2),n=t[0],r=t[1];return[n.replace(/([A-Z])/g,function(e){return"_".concat(e.toLowerCase())}),r]}),eo.log(f),p=m.filter(function(e){return F(C(e,2)[1])}).map(function(e){var t,n,r,o,i,a=C(e,2),u=a[0],s=a[1];return eo.log(th(f,u),s),n=(t=C([u,s],2))[0],r=t[1],o=encodeURIComponent(n),i=r,("string"==typeof r&&(i=encodeURIComponent(r)),j(r)&&(i=encodeURIComponent(JSON.stringify(r)||"")),"granular_third_party_sharing_options"===n||"partner_sharing_settings"===n)?[o,i].join(encodeURIComponent("=")):[o,i].join("=")}).join("&"),h={fullUrl:s+c+("GET"===l?"?".concat(p):""),encodedParams:p}).fullUrl,v=h.encodedParams,new Promise(function(e,t){var r,i,a=new XMLHttpRequest;a.open(o,g,!0),r="REQUEST HEADERS:",i=[["Client-SDK","js".concat(V.version)],["Content-Type","POST"===o?"application/x-www-form-urlencoded":"application/json"]],eo.log(r),i.forEach(function(e){var t=C(e,2),n=t[0],o=t[1];a.setRequestHeader(n,o),eo.log(th(r,n),o)}),a.onreadystatechange=function(){return function(e,t,n){var r,o,i=n.xhr,a=n.url;if(4===i.readyState){var u=i.status>=200&&i.status<300,s=T(i.responseText);if(0!==i.status)return s?t(u?(o={status:"success",adid:(r=JSON.parse(i.responseText)).adid,timestamp:r.timestamp,ask_in:r.ask_in,retry_in:r.retry_in,continue_in:r.continue_in,tracking_state:r.tracking_state,attribution:void 0,message:void 0},K(a,"attribution")&&(o.attribution=r.attribution,o.message=r.message),G(o).filter(function(e){return!!C(e,2)[1]}).reduce(q,{})):tp(i,"SERVER_CANNOT_PROCESS",!0)):e(u?tp(i,"SERVER_MALFORMED_RESPONSE"):tp(i,"SERVER_INTERNAL_ERROR"));e(tp(i,"NO_CONNECTION"))}}(t,e,{xhr:a,url:n})},a.onerror=function(){return t(tp(a,"TRANSACTION_ERROR"))},a.send("GET"===o?void 0:v)})}).then(function(e){var t,n,r,o,a;return t=i.url,"success"===e.status&&(n=K(t,"gdpr_forget_device"),r=K(t,"attribution"),o=K(t,"session"),a="opted_out"===e.tracking_state,!n&&a?eH("sdk:gdpr-forget-me"):(r||n||a||!e.ask_in||eH("attribution:check",e),o&&eH("session:finished",e))),e})).then(function(e){return function(e,t){if(e&&e.retry_in){t(R(e.retry_in));return}h(),"function"==typeof p?p(e,N,R):N(),t(e)}(e,n)}).catch(function(r){return function(n,r,o){if(n&&"RETRY"===n.action){if("NO_CONNECTION"===n.code){var i=e.next();i.done?(h(),r(R(6e4))):(t=i,r(R(150)))}else r(R());return}N(!0),o(n||{})}(r,n,o)})},y)}):(v.connection+=1,eo.log("No internet connectivity, trying request ".concat(r.url," in ").concat(6e4,"ms")),new Promise(function(e){g=setTimeout(function(){e(n(r))},6e4)}))}({endpoint:t.value["/gdpr_forget_device"===d?"gdpr":"app"],url:d,method:f,params:w({attempts:1},m)})):(eo.error("You must define url for the request to be sent"),Promise.reject({status:"error",action:"CONTINUE",response:"",message:E.MISSING_URL,code:"MISSING_URL"}))}function D(){d=r,f=i,m=w({},u),p=s}function N(e){eo.log("Request ".concat(d||"unknown"," ").concat(e?"failed":"has been finished")),v.request=0,v.connection=0,y=150,D(),B()}function R(e){var t,n,r,o,i;return v.request+=1,B(),P({wait:e||(t=v.request,i=Math.min(i=(o=tg[n=(n=c)||"long"]).delay*Math.pow(2,t-1),o.maxDelay),o.minRange&&o.maxRange&&(i*=(r=o.minRange,Math.random()*(o.maxRange-r)+r)),Math.round(i)),retrying:!0})}function A(){g&&clearTimeout(g),g=null}function B(){var e=!!k;A(),k=null,e&&(y=150,v.request=0,v.connection=0,eo.log("Previous ".concat(d||"unknown"," request attempt canceled")),D())}return{send:function(){var e,t,n,r,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.url,u=i.method,s=i.params,c=i.continueCb,l=i.wait;return t=(e={url:a,method:u,params:void 0===s?{}:s,continueCb:c}).url,n=e.method,r=e.params,o=e.continueCb,t&&(d=t),n&&(f=n),_(r)||(m=w({},r)),m=w({createdAt:eG()},m),"function"==typeof o&&(p=o),P({wait:l})},isRunning:function(){return!!g},clear:B}};var tO=function(e){return e===D.REASON_GDPR?"GDPR disable":"disable"},tI=function(e){return{start:{inProgress:"Adjust SDK ".concat(tO(e)," process has already started"),done:"Adjust SDK ".concat(tO(e)," process is now started")},finish:{inProgress:"Adjust SDK ".concat(tO(e)," process has already finished"),done:"Adjust SDK ".concat(tO(e)," process is now finished")}}};function tR(e,t){var n=e.reason,r=e.pending,o=tt()||{},i=o.reason,a=o.pending,u="start"===t&&a?"start":"finish",s="start"===t&&i,c="finish"===t&&i&&!a;return s||c?(eo.log(tI(i)[u].inProgress),!1):(eo.log(tI(n)[u].done),tn({reason:n||D.REASON_GENERAL,pending:r}),!0)}function tA(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return tR({reason:e,pending:t},"start")}function tx(){var e=tt()||{},t=e.reason,n=e.pending;return t!==D.REASON_GENERAL&&(t!==D.REASON_GDPR||n)?t===D.REASON_GDPR&&n?"paused":"on":"off"}var tC=ef.ActivityState,t_=!1;function tj(e){return e?"unknown"===e.uuid?(tA(D.REASON_GDPR),e4.destroy(),{exists:!0,stored:null}):(e4.init(e),{exists:!0,stored:e}):{exists:!1}}function tT(){return"off"!==tx()&&e4.isStarted()}function tB(){if(!tT())return Promise.resolve(null);var e=w(w({},e4.current),{},{lastActive:Date.now()});return tm.updateItem(tC,e).then(function(){return e4.current=e})}var tU=tN({strategy:"long",continueCb:function(e,t){var n=e&&e.continue_in||null;return tq.pause=n?{timestamp:Date.now(),wait:n}:null,tm.getFirst(tK).then(function(e){return e?tm.deleteItem(tK,e.timestamp):null}).then(function(){return t(),tq.running=!1,tM({wait:n})})}}),tL=!1,tK="queue",tq={running:!1,timestamp:null,pause:null};function tG(e){var t,n=e.url,r=e.method,o=e.params,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.auto,u=i.timestamp;e4.updateParams(n,a);var s=G(o||{}).filter(function(e){return F(C(e,2)[1])}).reduce(q,{}),c={timestamp:(t=Date.now(),tq.timestamp&&t<=tq.timestamp&&(t=tq.timestamp+1),tq.timestamp=t,t),url:n,method:r,params:w(w({},e4.getParams(n)),s)};return u&&(c.createdAt=u),tm.addItem(tK,c).then(function(){return K(n,"session")&&e4.resetSessionOffset(),e4.updateLastActive(),tB()}).then(function(){return tq.running?{}:tM()})}function tM(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cleanUp,n=e.wait;if(tq.running)return Promise.resolve({});tq.running=!0;var r=Promise.resolve({});return t&&(r=r.then(tW)),r.then(function(){return tm.getFirst(tK)}).then(function(e){return function(){var e,t,n,r,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=o.timestamp,a=o.createdAt,u=o.url,s=o.method,c=o.params,l=arguments.length>1?arguments[1]:void 0,d=e4.current||{},f="/session"===u&&!d.installed,m=!u&&!s&&!c;return tL&&!f||m?(tq.running=!1,Promise.resolve({})):tU.send({url:u,method:s,params:w(w({},c),{},{createdAt:eG(a||i)}),wait:l||(t=(e=tq.pause||{}).timestamp,n=e.wait,(r=Date.now()-(t||0))<n?n-r:null)})}(e,n)})}function tF(e){if(void 0===e){eo.error("State not provided, true or false has to be defined");return}if(e===tL){eo.error("The app is already in ".concat(e?"offline":"online"," mode"));return}var t=tL;tL=e,!e&&t&&tM(),eo.info("The app is now in ".concat(e?"offline":"online"," mode"))}function tW(){var e=Date.now()-ed.requestValidityWindow;return tm.deleteBulk(tK,e,"upperBound")}var tV="globalParams",tH={short:"No type provided",long:"Global parameter type not provided, `callback` or `partner` types are available"};function tY(e){return(e||[]).map(function(e){return{key:e.key,value:e.value}})}function tz(){return Promise.all([tm.filterBy(tV,"callback"),tm.filterBy(tV,"partner")]).then(function(e){var t=C(e,2),n=t[0],r=t[1];return{callbackParams:tY(n),partnerParams:tY(r)}})}function tJ(e,t){if(void 0===t)return eo.error(tH.long),Promise.reject({message:tH.short});var n=U(e),r=Object.keys(n).map(function(e){return{key:e,value:n[e],type:t}});return Promise.all([tm.filterBy(tV,t),tm.addBulk(tV,r,!0)]).then(function(e){var n=C(e,2),o=n[0],i=n[1],a=L(o.map(function(e){return e.key}),i.map(function(e){return e[0]}));return eo.log("Following ".concat(t," parameters have been saved: ").concat(r.map(function(e){return"".concat(e.key,":").concat(e.value)}).join(", "))),a.length&&eo.log("Keys: ".concat(a.join(", ")," already existed so their values have been updated")),i})}function tQ(e,t){return void 0===t?(eo.error(tH.long),Promise.reject({message:tH.short})):tm.deleteItem(tV,[e,t]).then(function(n){return eo.log("".concat(e," ").concat(t," parameter has been deleted")),n})}function tX(e){return void 0===e?(eo.error(tH.long),Promise.reject({message:tH.short})):tm.deleteBulk(tV,e).then(function(t){return eo.log("All ".concat(e," parameters have been deleted")),t})}var tZ=!1,t$=document;function t0(){return t3(),e4.updateSessionOffset(),e4.toBackground(),tB()}function t1(){return tm.getFirst(tC).then(function(e){var t=e4.current,n=t.lastActive||0;if(tT()&&n<e.lastActive){var r=!t.installed&&e.installed,o=(t.sessionCount||0)<(e.sessionCount||0);(r||o)&&eH("sdk:installed"),e4.current=e,tr()}return e}).then(function(){e4.updateSessionLength(),e4.toForeground()}).then(t5)}function t2(){clearTimeout(h),h=setTimeout(g&&t$[g.hidden]?t0:t1,0)}function t6(){g&&!t$[g.hidden]&&(tr(),tZ||"on"!==tx()||(tS(t$,g.visibilityChange,t6),nw.__internal__.restartAfterAsyncEnable()))}function t4(e,t){if(t&&"error"===t.status){eo.error("Session was not successful, error was returned from the server:",t.response);return}return e4.updateInstalled(),eH("sdk:installed"),tB()}function t3(){clearInterval(p)}function t5(){t3(),p=setInterval(function(){return e4.updateSessionOffset(),tB()},ed.sessionTimerWindow);var e=e4.current,t=e.lastInterval,n=e.sessionCount>0;return!n||n&&1e3*t>=ed.sessionWindow?tz().then(function(e){var t,n;tG({url:"/session",method:"POST",params:(t=e.callbackParams,n=e.partnerParams,{callbackParams:t.length?U(t):null,partnerParams:n.length?U(n):null})},{auto:!0})}):(eH("attribution:check"),tB())}var t7=tN({url:"/attribution",strategy:"short",continueCb:function(e,t,n){return!e||e&&"error"===e.status?(t(),Promise.resolve({state:"unknown"})):e.ask_in?n(e.ask_in):(t(),function(e){if(_(e)||(t=e.adid,n=e.attribution,void 0===t||!t||!L(t8,Object.keys(void 0===n?{}:n)).length)||(r=e.adid,o=e.attribution,i=e4.current.attribution||{},!(o&&t8.some(function(e){return i[e]!==o[e]}))&&r===i.adid))return Promise.resolve({state:"same"});var t,n,r,o,i,a=G(e.attribution).filter(function(e){var t=C(e,1)[0];return -1!==t8.indexOf(t)}).reduce(q,{adid:e.adid});return e4.current=w(w({},e4.current),{},{attribution:a}),tB().then(function(){return eH("attribution:change",a),eH(R.ATTRIBUTION_RECEIVED,a),eo.info("Attribution has been updated"),{state:"changed"}})}(e))}}),t8=["tracker_token","tracker_name","network","campaign","adgroup","creative","click_label","state"],t9=tN({url:"/gdpr_forget_device",method:"POST",strategy:"short"}),ne={running:"Adjust SDK is running pending GDPR Forget Me request",pending:"Adjust SDK will run GDPR Forget Me request after initialisation",paused:"Adjust SDK is already prepared to send GDPR Forget Me request",off:"Adjust SDK is already disabled"};function nt(e){var t=tx();return e||"on"===t?(ed.isInitialised()?t9.send({params:w({},e4.getParams())}).then(function(){eH("sdk:gdpr-forget-me")}):eo.log(ne.pending),!0):(eo.log(ne[t]),!1)}var nn=eK(function e(t){eU(this,e),S(this,"_granularOptions",{}),S(this,"_partnerSharingSettings",{}),"boolean"!=typeof t&&eo.warn("isEnabled should be boolean, converting ".concat(t," results ").concat(!!t)),this._isEnabled=!!t},[{key:"isEnabled",get:function(){return this._isEnabled}},{key:"granularOptions",get:function(){return this._granularOptions}},{key:"partnerSharingSettings",get:function(){return this._partnerSharingSettings}},{key:"addGranularOption",value:function(e,t,n){if(!e||!t||void 0===n){eo.error("Cannot add granular option, partnerName, key and value are mandatory");return}var r=S({},t,n);this.granularOptions[e]?this.granularOptions[e]=w(w({},this.granularOptions[e]),r):this.granularOptions[e]=r}},{key:"addPartnerSharingSetting",value:function(e,t,n){if(!e||!t||void 0===n){eo.error("Cannot add partner sharing setting, partnerName, key and value are mandatory");return}var r=S({},t,n);this.partnerSharingSettings[e]?this.partnerSharingSettings[e]=w(w({},this.partnerSharingSettings[e]),r):this.partnerSharingSettings[e]=r}}]),nr=[];function no(e,t){nr.push({method:e,description:t,timestamp:Date.now()})}var ni="eventDeduplication";function na(e,t){var n;(n=e||window.location.search.substring(1).split("&").map(function(e){return e.split("=")}).reduce(q,{}).adjust_referrer)&&tG({url:"/sdk_click",method:"POST",params:{clickTime:eG(),source:"web_referrer",referrer:decodeURIComponent(n)}},{timestamp:t})}var nu=["logLevel","logOutput"],ns=null,nc=!1,nl=!1,nd=!1;function nf(e){nP("third-party sharing",function(){return e4.waitForWebUUID().then(function(){return function(e){if(!e||void 0===e.isEnabled){eo.error("Can not track third-party sharing without parameters");return}tG({url:"/third_party_sharing",method:"POST",params:{sharing:e.isEnabled?"enable":"disable",granularThirdPartySharingOptions:e.granularOptions,partnerSharingSettings:e.partnerSharingSettings}})}(e)})},{schedule:!1,optionalInit:!0})}function nm(){var e;"paused"===tx()&&(tR({reason:D.REASON_GDPR,pending:!1},"finish"),Promise.all([(e={uuid:"unknown"},e4.current=e,tm.clear(tC).then(function(){return tm.addItem(tC,e)})),tm.clear(tV),tm.clear(tK)]).then(nv))}function np(){return nc||ed.isInitialised()}function nh(){nc=!1,nl=!1,nr=[],tU.clear(),tq.running=!1,tq.timestamp=null,tq.pause=null,tZ=!1,e4.toBackground(),t3(),g&&(clearTimeout(h),tS(t$,g.visibilityChange,t2),tk(t$,g.visibilityChange,t6)),t7.clear()}function ng(e){e&&eo.log("Adjust SDK has been shutdown due to asynchronous disable"),nh(),eW.forEach(clearTimeout),eW=[],eF={},e4.destroy(),tS(window,"online",ty),tS(window,"offline",tb),tm.destroy(),ed.destroy()}function nv(){nd=!1,ng(),t9.clear(),ns=null,eo.log("Adjust SDK instance has been destroyed")}function ny(e){eo.log("Adjust SDK is starting with web_uuid set to ".concat(e.uuid));var t=e4.current.installed;"paused"===tx()&&(eo.log(ne.running),nt(!0));var n=tx(),r=function(e){return"Adjust SDK start has been interrupted ".concat(e)};return"off"===n?(ng(),Promise.reject({interrupted:!0,message:r("due to complete async disable")})):"paused"===n?(nh(),Promise.reject({interrupted:!0,message:r("due to partial async disable")})):nl?Promise.reject({interrupted:!0,message:r("due to multiple synchronous start attempt")}):(tM({cleanUp:!0}),((g=function(){var e=document;if(void 0!==e.hidden)return{hidden:"hidden",visibilityChange:"visibilitychange"};for(var t=G({mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange",webkitHidden:"webkitvisibilitychange"}),n=0;n<t.length;n+=1){var r=C(t[n],2),o=r[0],i=r[1];if(void 0!==e[o])return{hidden:o,visibilityChange:i}}return null}(),tZ)?Promise.reject({interrupted:!0,message:"Session watch already initiated"}):(tZ=!0,eV("session:finished",t4),g&&tk(t$,g.visibilityChange,t2),g&&t$[g.hidden])?(eo.log("Session request attempt canceled because the tab is still hidden"),Promise.resolve({})):(e4.initParams(),t5())).then(function(){nc=!1,nl=!0,t&&nb()}))}function nb(){var e;nd=!0,nr.forEach(function(e){"function"==typeof e.method&&(eo.log("Delayed ".concat(e.description," task is running now")),e.method(e.timestamp))}),nr=[],e="sdk:installed",G(eF).some(function(t){var n=C(t,2)[1];return n.some(function(t,r){t.id===e&&n.splice(r,1)})})}function nk(e){if(e.interrupted){eo.log(e.message);return}if(ng(),eo.error("Adjust SDK start has been canceled due to an error",e),e.stack)throw e}function nS(e){if("off"===tx()){eo.log("Adjust SDK is disabled, can not start the sdk");return}ed.set(e),tk(window,"online",ty),tk(window,"offline",tb),eV("sdk:installed",nb),eV("sdk:shutdown",function(){return ng(!0)}),eV("sdk:gdpr-forget-me",nm),eV("attribution:check",function(e,t){var n,r;return n=e4.current,(r=(t||{}).ask_in)||!n.attribution&&n.installed?(t7.send({params:w({initiatedBy:t?"backend":"sdk"},e4.getParams()),wait:r}),e4.updateSessionOffset(),tB()):Promise.resolve(n)}),"function"==typeof e.attributionCallback&&eV("attribution:change",e.attributionCallback),(t_?Promise.reject({interrupted:!0,message:"Adjust SDK start already in progress"}):(t_=!0,tm.getFirst(tC).then(tj).then(function(e){if(e.exists)return t_=!1,e.stored;var t,n=_(e4.current)?{uuid:(t=Date.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:11&n).toString(16)}))}:e4.current;return tm.addItem(tC,n).then(function(){return e4.init(n),tr(),t_=!1,n})}).then(function(e){return e?eH(R.WEB_UUID_CREATED,e.uuid):eH(R.WEB_UUID_CREATED,"gdpr_forgotten"),e}))).then(ny).then(na).catch(nk)}function nP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.schedule,o=n.waitForInitFinished,i=n.optionalInit;if(tm.getType()===N.NO_STORAGE){eo.log("Adjust SDK can not ".concat(e,", no storage available"));return}if("on"!==tx()){eo.log("Adjust SDK is disabled, can not ".concat(e));return}if(!(i||np())&&o){eo.error("Adjust SDK can not ".concat(e,", sdk instance is not initialized"));return}if("function"==typeof t){if(!(r&&!(nd&&nl)&&(i||np())))return t();no(t,e),eo.log("Running ".concat(e," is delayed until Adjust SDK is up"))}}let nw={initSdk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.logLevel,n=e.logOutput,r=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,nu);if(eo.setLogLevel(t,n),np()){eo.error("You already initiated your instance");return}ed.hasMissing(r)||(nc=!0,tm.init(r.namespace).then(function(e){if(e.type===N.NO_STORAGE){eo.error("Adjust SDK can not start, there is no storage available");return}eo.info("Available storage is ".concat(e.type)),ns=w({},r),nS(r)}))},getAttribution:function(){return nP("get attribution",function(){return e4.getAttribution()})},getWebUUID:function(){return nP("get web_uuid",function(){return e4.getWebUUID()})},waitForAttribution:function(){return nP("get attribution",function(){return e4.waitForAttribution()},{schedule:!1})},waitForWebUUID:function(){return nP("get web_uuid",function(){return e4.waitForWebUUID()},{schedule:!1})},setReferrer:function(e){if(!e||"string"!=typeof e){eo.error("You must provide a string referrer");return}nP("setting reftag",function(t){return na(e,t)},{schedule:!0,waitForInitFinished:!0,optionalInit:!0})},trackEvent:function(e){return function(e){if(tm.getType()===N.NO_STORAGE){var t="Adjust SDK can not track event, no storage available";return eo.log(t),Promise.reject(t)}if("on"!==tx()){var n="Adjust SDK is disabled, can not track event";return eo.log(n),Promise.reject(n)}if(!np()){var r="Adjust SDK can not track event, sdk instance is not initialized";return eo.error(r),Promise.reject(r)}return new Promise(function(t){var n=function(n){return t(function(e,t){if(!e||e&&(_(e)||!e.eventToken)){var n,r="You must provide event token in order to track event";return eo.error(r),Promise.reject(r)}return((n=e.deduplicationId)?tm.getAll(ni).then(function(e){return e.map(function(e){return e.id})}).then(function(e){var t,r;return -1===e.indexOf(n)?(r=(t=ed.getCustomConfig().eventDeduplicationListLimit)>0?t:10,tm.count(ni).then(function(e){var t=Promise.resolve();if(e>=r){var n=e-r+1;eo.log("Event deduplication list limit has been reached. Oldest ids are about to be removed (".concat(n," of them)")),t=tm.trimItems(ni,n)}return t}).then(function(){return eo.info("New event deduplication id is added to the list: ".concat(n)),tm.addItem(ni,{id:n})})):Promise.reject({message:"Event won't be tracked, since it was previously tracked with the same deduplication id ".concat(n)})}):Promise.resolve()).then(tz).then(function(n){var r,o,i,a,u,s,c,l;return tG({url:"/event",method:"POST",params:(r=n.callbackParams,o=n.partnerParams,i={},s=w({eventToken:e.eventToken,deduplicationId:e.deduplicationId},(a=e.revenue,u=e.currency,isNaN(a)||(a=parseFloat(a))<0||!u?{}:{revenue:a.toFixed(5),currency:u})),c=w(w({},U(r)),U(e.callbackParams)),l=w(w({},U(o)),U(e.partnerParams)),_(c)||(i.callbackParams=c),_(l)||(i.partnerParams=l),w(w({},s),i))},{timestamp:t})}).catch(function(e){return e&&e.message&&eo.error(e.message),Promise.reject(e)})}(e,n))};!nd||!nl&&np()?(no(n,"track event"),eo.log("Running track event is delayed until Adjust SDK is up")):n()})}(e)},addGlobalCallbackParameters:function(e){nP("add global callback parameters",function(){return tJ(e,"callback")})},addGlobalPartnerParameters:function(e){nP("add global partner parameters",function(){return tJ(e,"partner")})},removeGlobalCallbackParameter:function(e){nP("remove global callback parameter",function(){return tQ(e,"callback")})},removeGlobalPartnerParameter:function(e){nP("remove global partner parameter",function(){return tQ(e,"partner")})},clearGlobalCallbackParameters:function(){nP("remove all global callback parameters",function(){return tX("callback")})},clearGlobalPartnerParameters:function(){nP("remove all global partner parameters",function(){return tX("partner")})},switchToOfflineMode:function(){nP("set offline mode",function(){return tF(!0)})},switchBackToOnlineMode:function(){nP("set online mode",function(){return tF(!1)})},stop:function(){tA()&&ed.isInitialised()&&ng()},restart:function(){var e;((e=(tt()||{}).reason)===D.REASON_GDPR?(eo.log("Adjust SDK is disabled due to GDPR-Forget-Me request and it can not be re-enabled"),1):e?(eo.log("Adjust SDK has been enabled"),tn(null),0):(eo.log("Adjust SDK is already enabled"),1))||!ns||nS(ns)},gdprForgetMe:function(){var e=nt();e&&(e=tA(D.REASON_GDPR,!0))&&ed.isInitialised()&&nh()},disableThirdPartySharing:function(){nf({isEnabled:!1})},trackThirdPartySharing:nf,ThirdPartySharing:nn,initSmartBanner:function(){eo.error("function `initSmartBanner` is deprecated")},showSmartBanner:function(){eo.error("function `showSmartBanner` is deprecated")},hideSmartBanner:function(){eo.error("function `hideSmartBanner` is deprecated")},__testonly__:{destroy:nv,clearDatabase:function(){return tm.deleteDatabase()}},__internal__:{restartAfterAsyncEnable:function(){eo.log("Adjust SDK has been restarted due to asynchronous enable"),ns&&nS(ns)}}};return y.default})(),e.exports=t()}}]);